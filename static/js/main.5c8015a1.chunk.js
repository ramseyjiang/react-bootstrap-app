(this["webpackJsonpreact-bootstrap-app"]=this["webpackJsonpreact-bootstrap-app"]||[]).push([[0],{32:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(9),r=a.n(n),c=a(19),o=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},33:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(38),o=a(36);t.a=function(e){var t=e.name,a=e.type,n=e.placeholder,l=e.onChange,u=(e.onBlur,e.error,e.label),s=(e.multiple,e.value);return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a.Group,{as:o.a},r.a.createElement(c.a.Label,null,u),r.a.createElement(c.a.Control,{type:a,placeholder:n,name:t,value:s,onChange:l,required:!0})))}},53:function(e,t,a){e.exports=a(67)},59:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),o=a.n(c),l=(a(58),a(59),a(11)),u=a(69),s=a(14),i=a(72),m=a(71),p=a(9),b=a.n(p),d=a(19),f=a(8);function E(e,t){return localStorage.setItem(e,t)}var g={isLoggedIn:!1,loading:!1,username:null,role:{isAdmin:!1,isManager:!1,isStaff:!1,isClient:!0},error:null};function h(e,t){switch(t.type){case"INIT":return v();case"LOADING":return Object(f.a)({},e,{loading:!0});case"LOGIN_SUCCESS":return O(t);case"LOGIN_FAIL":return j(t);case"LOGOUT":return w();default:return e}}var v=function(){var e,t=(e="username",localStorage.getItem(e));return Object(f.a)({},g,{isLoggedIn:null!==t,username:t})},O=function(e){return E("username",e.username),Object(f.a)({},g,{isLoggedIn:!0,username:e.username})},j=function(e){return E("username",null),Object(f.a)({},g,{error:e.error})},w=function(){var e;return e="username",localStorage.removeItem(e),Object(f.a)({},g)},y=Object(n.createContext)(),C=function(){return Object(n.useContext)(y)},k=function(e){var t=e.children,a=Object(n.useReducer)(h,g),c=Object(s.a)(a,2),o=c[0],l=c[1];Object(n.useEffect)((function(){null===o.username&&l({type:"INIT"})}),[o.username]);var u=function(){return l({type:"LOADING"})},i=Object(n.useCallback)((function(e){return l("ramsey"===e?{type:"LOGIN_SUCCESS",username:e}:{type:"LOGIN_FAIL",error:"User not found!"})}),[]),m=function(e){return new Promise((function(t){return setTimeout(t,e)}))},p=Object(n.useCallback)(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(2e3);case 2:if("ramsey"!==t){e.next=6;break}return e.abrupt("return",l({type:"LOGIN_SUCCESS",username:t}));case 6:return e.abrupt("return",l({type:"LOGIN_FAIL",error:"User not found!"}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),f=Object(n.useCallback)((function(){l({type:"LOGOUT"})}),[]),E=Object(n.useMemo)((function(){return{state:o,loading:u,logout:f,login:i,apiLogin:p}}),[f,i,p,o]);return r.a.createElement(y.Provider,{value:{authApi:E}},t)},I=function(){var e=C().authApi,t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],o=a[1],u=e.state.isLoggedIn?"primary":"dark";return r.a.createElement(i.a,{expanded:c,fixed:"top",expand:"sm",bg:u,variant:"dark"},r.a.createElement(i.a.Brand,{href:"/react-bootstrap-app"},"HooksHut"),r.a.createElement(i.a.Toggle,{onClick:function(){return o(!c&&"expanded")},"aria-controls":"basic-navbar-nav"}),r.a.createElement(i.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(m.a,{className:"mr-auto"},r.a.createElement(l.b,{exact:!0,className:"nav-link",to:"/react-bootstrap-app",onClick:function(){return o(!1)}},"Home"),r.a.createElement(l.b,{className:"nav-link",to:"/movies",onClick:function(){return o(!1)}},"Movies"),r.a.createElement(l.b,{className:"nav-link",to:"/tasks",onClick:function(){return o(!1)}},"Tasks"),r.a.createElement(l.b,{className:"nav-link",to:"/contact",onClick:function(){return o(!1)}},"Contact")),!e.state.isLoggedIn&&r.a.createElement(m.a,null,r.a.createElement(l.b,{exact:!0,to:"/login",className:"nav-link"},"Login"),r.a.createElement(l.b,{exact:!0,to:"/register",className:"nav-link"},"Register")),e.state.isLoggedIn&&r.a.createElement(m.a,null,r.a.createElement(l.b,{to:"/home",onClick:function(){return e.logout()},className:"nav-link"},"Logout"))))},L=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null))};var S=function(){return r.a.createElement("div",{className:"font-small bg-dark"},r.a.createElement("div",{className:"text-center text-white py-1"},"\xa9 ",(new Date).getFullYear()," Copyright:Ramsey Jiang"))},N=a(52),x=a(16),A=a(73),G={data:null,loading:!1,errorMessage:null},T=function(e,t){switch(t.type){case"LOADING":return Object(f.a)({},e,{loading:!0});case"GET_WEATHER_SUCCESS":return Object(f.a)({},G,{data:t.data});case"GET_WEATHER_FAILURE":return Object(f.a)({},G,{errorMessage:"Something wrong!"});default:throw new Error}},_=a(32),F=Object(n.createContext)(),R=function(e){var t=e.children,a=Object(n.useReducer)(T,G),c=Object(s.a)(a,2),o=c[0],l=c[1],u=Object(n.useCallback)((function(){Object(_.a)("https://ipapi.co/json/").then((function(e){var t=e.city+","+e.country;Object(_.a)("https://api.openweathermap.org/data/2.5/weather?APPID=3a58f9dd1f1515ec0dba25894ccea202&q="+t).then((function(e){try{l({type:"GET_WEATHER_SUCCESS",data:e})}catch(t){l({type:"GET_WEATHER_FAILURE",data:e})}}))}))}),["https://ipapi.co/json/"]),i=Object(n.useMemo)((function(){return{state:o,getWeather:u}}),[o,u]);return r.a.createElement(F.Provider,{value:{weatherApi:i}},t)},U=function(){var e=Object(n.useContext)(F).weatherApi;return Object(n.useEffect)((function(){e.getWeather()}),[]),r.a.createElement(r.a.Fragment,null,e.state.data&&r.a.createElement(A.a,{className:"justify-content-center weather-bar",variant:"info"},"Welcome, current weather is ",e.state.data.weather[0].main,", temperature is ",Math.round(5*(9*e.state.data.main.temp/5-459.67-32)/9),"\xb0C, conditions: ",e.state.data.weather[0].description))},W=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,null,r.a.createElement(U,null)))},P=a(25),H=a(38),M=a(70),D=a(33);function z(){var e=C().authApi,t=Object(n.useState)({username:"",password:""}),a=Object(s.a)(t,2),c=a[0],o=a[1],l=function(e){o(Object(f.a)({},c,Object(P.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,e.state.loading&&r.a.createElement("p",null,"Loading"),!e.state.loading&&r.a.createElement(u.a,{className:"justify-content-center col-6 bg-light"},e.state.error&&r.a.createElement(A.a,{variant:"danger"},e.state.error),r.a.createElement(H.a,{onSubmit:function(t){e.loading(),t.preventDefault(),e.login(c.username)},method:"post"},r.a.createElement(H.a.Row,null,r.a.createElement(D.a,{placeholder:"Please input username",type:"text",label:"Username",name:"username",value:c.username,onChange:l})),r.a.createElement(H.a.Row,null,r.a.createElement(D.a,{placeholder:"Please input password",type:"password",label:"Password",name:"password",value:c.password,onChange:l})),r.a.createElement(M.a,{variant:"primary",type:"submit",size:"sm"},"Login"))))}var B=Object(n.lazy)((function(){return a.e(6).then(a.bind(null,77))})),J=Object(n.lazy)((function(){return a.e(4).then(a.bind(null,80))})),q=Object(n.lazy)((function(){return a.e(3).then(a.bind(null,79))})),Y=Object(n.lazy)((function(){return a.e(5).then(a.bind(null,78))})),$=function(){var e=C().authApi,t=function(t){var a=t.component,n=Object(N.a)(t,["component"]);if(a===z&&e.state.isLoggedIn)return r.a.createElement(x.a,{to:"/react-bootstrap-app"});var c=e.state.isLoggedIn?a:z;return r.a.createElement(x.b,Object.assign({},n,{component:c}))};return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(x.d,null,r.a.createElement(x.b,{exact:!0,path:"/react-bootstrap-app",component:W}),r.a.createElement(x.b,{path:"/react-bootstrap-app",component:W}),r.a.createElement(t,{path:"/login",component:z}),r.a.createElement(x.b,{path:"/movies",component:J}),r.a.createElement(t,{path:"/tasks",component:q}),r.a.createElement(x.b,{path:"/contact",component:Y}),r.a.createElement(x.b,{component:B})))},K=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,null),r.a.createElement(u.a,{fluid:!0},r.a.createElement($,null)),r.a.createElement(S,null))},Q=function(){return r.a.createElement(l.a,null,r.a.createElement(k,null,r.a.createElement(K,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.5c8015a1.chunk.js.map